language: cpp

addons:
    apt:
        packages:
            - xvfb
env:
    global:
        - DISPLAY=:99

before_script:
    - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x24"
    - sleep 3
    - git clone https://github.com/sfml/sfml 
    - cd sfml 
    - git checkout 2.5.0
    - mkdir build && cd build
    - cmake .. $CMAKE_FLAGS -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=../install
    - cmake --build . --target install
    - cd ../..

script:
    - mkdir build && cd build
    - cmake ..  $CMAKE_FLAGS -DBUILD_TESTS=1 -DSFML_DIR=$TRAVIS_BUILD_DIR/sfml/install/lib/cmake/SFML -DCMAKE_INSTALL_PREFIX=../install
    - cmake --build . --target install --config Release

matrix:
  include:

  - name: "Linux GCC Dynamic"
    os: linux
    compiler: gcc


